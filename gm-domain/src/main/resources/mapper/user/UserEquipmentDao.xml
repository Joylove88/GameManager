<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.gm.modules.user.dao.UserEquipmentDao">

    <select id="selectPage" resultType="com.gm.modules.user.entity.UserEquipmentEntity">
        SELECT
            A.*,
            B.EQUIP_NAME,
            B.EQUIP_RARECODE,
            B.EQUIP_LEVEL,
            C.USER_NAME
        FROM
            GM_USER_EQUIPMENT A
        LEFT JOIN
            GM_EQUIPMENT_INFO B ON A.EQUIPMENT_ID = B.EQUIP_ID
        LEFT JOIN
            GM_USER C ON A.USER_ID = C.USER_ID

        ${ew.customSqlSegment}

        ORDER BY CREATE_TIME DESC
    </select>

    <!--获取玩家装备-->
    <select id="getUserEquip" resultType="com.gm.modules.user.rsp.UserEquipInfoRsp">
        SELECT
            A.*,
            B.EQUIP_NAME,
            B.EQUIP_RARECODE,
            B.EQUIP_LEVEL,
            B.EQUIP_IMG_URL,
            B.EQUIP_ICON_URL
        FROM
            GM_USER_EQUIPMENT A
        LEFT JOIN
            GM_EQUIPMENT_INFO B ON A.EQUIPMENT_ID = B.EQUIP_ID
        <where>
            <if test="status != null and status != ''">
                AND A.STATUS = #{status}
            </if>
            <if test="userId != null and userId != ''">
                AND A.USER_ID = #{userId}
            </if>
            <if test="userEquipmentId != null and userEquipmentId != ''">
                AND A.USER_EQUIPMENT_ID = #{userEquipmentId}
            </if>
        </where>
    </select>
</mapper>