<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.gm.modules.order.dao.TransactionOrderDao">
    <select id="selectPage" resultType="com.gm.modules.basicconfig.entity.ProbabilityEntity">
        SELECT
        A.*
        FROM
        GM_TRANSACTION_ORDER A

        ${ew.customSqlSegment}

        ORDER BY A.UPDATE_TIME DESC, A.CREATE_TIME DESC
    </select>

    <select id="queryTotalMoneyByUserId" resultType="double">
        SELECT IFNULL(sum(TRANSACTION_FEE),0) FROM GM_TRANSACTION_ORDER WHERE USER_ID = #{userId} AND CURRENCY_TYPE = '1' AND STATUS = '1'
    </select>

    <select id="querySonTotalMoneyByFatherId" resultType="double">
        SELECT
            IFNULL(sum(TRANSACTION_FEE),0)
        FROM
            gm_user t1
            LEFT JOIN gm_user t2 ON t1.USER_ID = t2.FATHER_ID
            LEFT JOIN gm_transaction_order t3 ON t2.USER_ID = t3.USER_ID
        WHERE
            1 = 1
            AND t1.USER_ID = #{userId}
    </select>

</mapper>