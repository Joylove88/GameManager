<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.gm.modules.basicconfig.dao.EquipmentFragDao">

    <select id="selectPage" resultType="com.gm.modules.basicconfig.entity.EquipmentFragEntity">
        SELECT A.*,B.EQUIP_NAME,B.EQUIP_RARECODE
        from GM_EQUIPMENT_FRAG A
        LEFT JOIN GM_EQUIPMENT_INFO B ON A.EQUIPMENT_ID = B.EQUIP_ID
        ${ew.customSqlSegment}
    </select>

    <!--获取装备卷轴关联稀有度信息-->
    <select id="getEquipFragInfo" resultType="com.gm.modules.basicconfig.entity.EquipmentFragEntity">
        SELECT
        A.*,
        B.EQUIP_NAME,
        B.EQUIP_RARECODE
        FROM GM_EQUIPMENT_FRAG A
        LEFT JOIN GM_EQUIPMENT_INFO B ON A.EQUIPMENT_ID = B.EQUIP_ID
        WHERE A.`STATUS` = '1'
    </select>

    <!--获取指定稀有度的装备卷轴信息-->
    <select id="getEquipmentFragPro" resultType="com.gm.modules.basicconfig.entity.EquipmentFragEntity">
        SELECT
        A.*,
        B.EQUIP_NAME,
        B.EQUIP_RARECODE
        FROM
        GM_EQUIPMENT_FRAG A
        LEFT JOIN GM_EQUIPMENT_INFO B ON A.EQUIPMENT_ID = B.EQUIP_ID
        <where>
            <if test="status != null and status != ''">
                AND A.`STATUS` = #{status}
            </if>
            <if test="rareCode != null and rareCode != ''">
                AND B.EQUIP_RARECODE = #{rareCode}
            </if>
        </where>
    </select>
</mapper>